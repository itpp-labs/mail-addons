<?xml version="1.0" encoding="UTF-8"?>
<!--Copyright 2016 x620 <https://github.com/x620>
    Copyright 2017 Ivan Yelizariev <https://it-projects.info/team/yelizariev>
    Copyright 2019 Artem Rafailov <https://it-projects.info/team/Ommo73/>
    License LGPL-3.0 (https://www.gnu.org/licenses/lgpl.html).-->
<template>
    <t t-extend="mail.widget.Thread.Message">
        <t t-jquery="p.o_mail_info" t-operation="append">
            <span class="recipients_info">
                <t t-if="message.partner_names or message.channel_names">
                    <t t-if="message.partner_names.length > 0">To: </t>
                    <t t-else="message.channel_names.length > 0">To: </t>
                    <t t-foreach="message.partner_names.length" t-as="i">
                        <t t-if="i &lt; message.more_recipients_value">
                            <a t-att-href="_.str.sprintf('/web?#id=%s&amp;view_type=form&amp;model=res.partner', message.partner_names[i][0])" class="recipient_link">
                                <i t-esc="message.partner_names[i][1]"/><t t-if="i &lt; message.partner_names.length - 1">, </t><t t-else="message.channel_names.length > 0 and message.partner_names.length &lt; 4">; </t>
                            </a>
                        </t>
                    </t>

                    <t t-if="message.channel_names">
                        <t t-foreach="message.channel_names.length" t-as="i">
                            <t t-if="message.partner_names.length &lt; message.more_recipients_value  and (message.partner_names.length + i) &lt; message.more_recipients_value">
                                <a t-if="message.channel_names[i]" t-att-href="_.str.sprintf('/web?#id=%s&amp;view_type=form&amp;model=mail.channel', message.channel_names[i][0])" class="recipient_link">
                                    <i t-esc="message.channel_names[i][1]"/><t t-if="i &lt; message.channel_names.length - 1">, </t>
                                </a>
                            </t>
                        </t>
                    </t>


                    <t t-if="message.recipients.length &gt; message.more_recipients_value">
                        <span t-att-title="message.more_recipients">
                            and <t t-esc="message.recipients.length - message.more_recipients_value"/> more
                        </span>
                    </t>
                </t>
            </span>
        </t>
    </t>
</template>
